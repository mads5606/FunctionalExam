"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var test = require("blue-tape");
var index_1 = require("./index");
test('async middleware', function (t) {
    t.test('middleware', function (t) {
        var m = index_1.wrap(function (req, res) {
            return Promise.reject(new Error('test'));
        });
        m({}, {}, function (err) {
            t.equal(err.message, 'test');
            t.end();
        });
    });
    t.test('error middleware', function (t) {
        var m = index_1.wrap(function (err, req, res, next) {
            t.equal(err.message, 'test');
            t.end();
        });
        m(new Error('test'), {}, {}, function () { });
    });
    t.test('error in error middleware', function (t) {
        var m = index_1.wrap(function (err, req, res, next) {
            return Promise.reject(err);
        });
        m(new Error('test'), {}, {}, function (err) {
            t.equal(err.message, 'test');
            t.end();
        });
    });
});
//# sourceMappingURL=index.spec.js.map